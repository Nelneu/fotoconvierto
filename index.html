<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FotoConvierto - Sube tu foto</title>
  <meta name="description" content="Sube tu foto fÃ¡cilmente y visualÃ­zala al instante.">
  <meta name="author" content="Tu Nombre o Empresa">
  <meta name="theme-color" content="#ff6600">
  <link rel="icon" type="image/png" href="favicon.png">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="css/editor.css">
  <link rel="stylesheet" href="css/filters.css">
  <link rel="stylesheet" href="css/transforms.css">
  <link rel="stylesheet" href="css/export.css">
  <link rel="stylesheet" href="css/comparison.css">
  <link rel="stylesheet" href="css/crop.css">
  <!-- Fuente moderna -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
  <div class="card">
    <h1>ğŸ“¸ Sube tu foto</h1>
    <!-- Etiqueta label asociada al input (id correcto) -->
    <label for="fileInput" class="upload-btn">Elegir imagen</label>
    <input type="file" id="fileInput" accept="image/*">

    <!-- Barra de Progreso -->
    <div id="progress-container" style="display: none;">
      <div id="progress-bar"></div>
    </div>
    <div id="status-text"></div>

    <!-- Canvas Container con placeholder -->
    <div id="canvas-container">
      <canvas id="mainCanvas"></canvas>
      <div id="placeholder" class="placeholder-visible">ğŸ“¸ Sube una imagen para comenzar</div>
    </div>

    <button id="clearBtn">Borrar imagen</button>

    <!-- Panel de controles del editor (se mostrarÃ¡ cuando haya imagen) -->
    <div class="editor-controls" id="editorControls" style="display: none;">

      <!-- Panel de Filtros -->
      <div class="controls-section" id="filters-panel">
        <h3>ğŸ¨ Filtros</h3>

        <!-- Brillo -->
        <div class="filter-control">
          <div class="filter-label">
            <span class="filter-name">â˜€ï¸ Brillo</span>
            <span class="filter-value" id="brightness-value">100</span>
          </div>
          <input type="range" id="brightness" min="0" max="200" value="100" step="1">
        </div>

        <!-- Contraste -->
        <div class="filter-control">
          <div class="filter-label">
            <span class="filter-name">ğŸŒ— Contraste</span>
            <span class="filter-value" id="contrast-value">100</span>
          </div>
          <input type="range" id="contrast" min="0" max="200" value="100" step="1">
        </div>

        <!-- SaturaciÃ³n -->
        <div class="filter-control">
          <div class="filter-label">
            <span class="filter-name">ğŸ¨ SaturaciÃ³n</span>
            <span class="filter-value" id="saturation-value">100</span>
          </div>
          <input type="range" id="saturation" min="0" max="200" value="100" step="1">
        </div>

        <!-- Desenfoque -->
        <div class="filter-control">
          <div class="filter-label">
            <span class="filter-name">ğŸŒ«ï¸ Desenfoque</span>
            <span class="filter-value" id="blur-value">0px</span>
          </div>
          <input type="range" id="blur" min="0" max="10" value="0" step="0.5">
        </div>

        <!-- Escala de Grises -->
        <div class="filter-control">
          <div class="filter-label">
            <span class="filter-name">âš« Blanco y Negro</span>
            <span class="filter-value" id="grayscale-value">0%</span>
          </div>
          <input type="range" id="grayscale" min="0" max="100" value="0" step="1">
        </div>

        <!-- BotÃ³n Resetear -->
        <button id="reset-filters">â†º Resetear Filtros</button>
      </div>

      <!-- Panel de Transformaciones -->
      <div class="controls-section" id="transforms-panel">
        <h3>ğŸ”„ Transformar</h3>

        <div class="transform-buttons">
          <!-- Fila 1: Rotaciones -->
          <div class="button-row">
            <button id="rotate-left" class="btn-transform" title="Rotar 90Â° izquierda">
              <span class="btn-icon">â†¶</span>
              <span class="btn-label">Rotar â†</span>
            </button>
            <button id="rotate-right" class="btn-transform" title="Rotar 90Â° derecha">
              <span class="btn-icon">â†·</span>
              <span class="btn-label">Rotar â†’</span>
            </button>
          </div>

          <!-- Fila 2: Volteos -->
          <div class="button-row">
            <button id="flip-horizontal" class="btn-transform" title="Voltear horizontal">
              <span class="btn-icon">â†”ï¸</span>
              <span class="btn-label">Voltear â†”</span>
            </button>
            <button id="flip-vertical" class="btn-transform" title="Voltear vertical">
              <span class="btn-icon">â†•ï¸</span>
              <span class="btn-label">Voltear â†•</span>
            </button>
          </div>
        </div>
      </div>

      <!-- Panel de ExportaciÃ³n -->
      <div class="controls-section" id="export-panel">
        <h3>ğŸ’¾ Descargar</h3>

        <!-- Nombre del archivo -->
        <div class="form-group">
          <label for="filename">Nombre del archivo</label>
          <input type="text" id="filename" class="text-input" placeholder="mi-foto-editada" value="mi-foto-editada">
        </div>

        <!-- Selector de formato -->
        <div class="form-group">
          <label for="format-select">Formato</label>
          <select id="format-select" class="format-select">
            <option value="jpeg" selected>JPEG - Comprimido (recomendado)</option>
            <option value="png">PNG - Sin pÃ©rdida (mayor tamaÃ±o)</option>
            <option value="webp">WebP - Moderno y eficiente</option>
          </select>
        </div>

        <!-- Control de calidad (solo para JPEG y WebP) -->
        <div class="form-group" id="quality-control">
          <label for="quality-slider">
            <span>Calidad</span>
            <span id="quality-value" class="quality-value">90%</span>
          </label>
          <input type="range" id="quality-slider" min="1" max="100" value="90" step="1">
          <div class="quality-hint">
            <span class="hint-low">Menor tamaÃ±o</span>
            <span class="hint-high">Mejor calidad</span>
          </div>
        </div>

        <!-- InformaciÃ³n de la imagen -->
        <div class="image-info">
          <div class="info-item">
            <span class="info-label">Dimensiones:</span>
            <span id="image-dimensions" class="info-value">-</span>
          </div>
          <div class="info-item">
            <span class="info-label">TamaÃ±o aprox:</span>
            <span id="file-size" class="info-value">-</span>
          </div>
        </div>

        <!-- BotÃ³n de descarga -->
        <button id="download-btn" class="btn-download">
          <span class="download-icon">â¬‡ï¸</span>
          <span class="download-text">Descargar Imagen</span>
        </button>
      </div>

      <!-- Panel de ComparaciÃ³n -->
      <div class="controls-section" id="comparison-panel">
        <h3>âš–ï¸ Comparar</h3>

        <!-- BotÃ³n de toggle comparaciÃ³n -->
        <button id="toggle-comparison" class="btn-comparison">
          <span class="btn-icon">ğŸ‘ï¸</span>
          <span class="btn-text">Ver Original</span>
        </button>

        <!-- Control de vista dividida -->
        <div id="split-view-control" class="hidden">
          <!-- Checkbox para activar split view -->
          <label class="split-toggle">
            <input type="checkbox" id="split-mode-toggle">
            <span>Vista dividida (antes/despuÃ©s)</span>
          </label>

          <!-- Slider divisor -->
          <div id="split-slider-container" style="display: none;">
            <div id="split-slider-value">50%</div>
            <input type="range" id="split-slider" min="0" max="100" value="50" step="1">
            <div class="split-labels">
              <span>Original</span>
              <span>Editada</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Panel de Recorte -->
      <div class="controls-section" id="crop-panel">
        <h3>âœ‚ï¸ Recortar</h3>

        <!-- Selector de proporciÃ³n -->
        <div class="crop-ratio-group">
          <label for="crop-ratio">ProporciÃ³n</label>
          <select id="crop-ratio">
            <option value="free" selected>Libre</option>
            <option value="1">Cuadrado (1:1)</option>
            <option value="1.333">Paisaje (4:3)</option>
            <option value="1.777">PanorÃ¡mico (16:9)</option>
            <option value="0.5625">Vertical (9:16 - Stories)</option>
            <option value="0.8">Retrato (4:5 - Instagram)</option>
          </select>
        </div>

        <!-- Botones de recorte -->
        <div class="crop-buttons">
          <button id="start-crop">
            <span class="btn-icon">âœ‚ï¸</span>
            <span>Iniciar Recorte</span>
          </button>

          <!-- Botones de acciÃ³n (visibles durante recorte) -->
          <div class="crop-action-buttons" id="crop-actions">
            <button id="apply-crop">
              <span>âœ“</span>
              <span>Aplicar</span>
            </button>
            <button id="cancel-crop">
              <span>âœ—</span>
              <span>Cancelar</span>
            </button>
          </div>
        </div>

        <!-- Instrucciones de uso -->
        <div class="crop-instructions" id="crop-instructions">
          <p><strong>Instrucciones:</strong></p>
          <p>â€¢ Arrastra para crear el Ã¡rea de recorte</p>
          <p>â€¢ Mueve el Ã¡rea haciendo clic dentro</p>
          <p>â€¢ Redimensiona desde las esquinas</p>
        </div>
      </div>

    </div>

  </div>
  <!-- Scripts del editor (mÃ³dulos cargados en orden) -->
  <script src="js/canvas-manager.js"></script>
  <script src="js/filters.js"></script>
  <script src="js/transforms.js"></script>
  <script src="js/export.js"></script>
  <script src="js/comparison.js"></script>
  <script src="js/crop.js"></script>
  <script src="js/ui-controls.js"></script>
  <script src="js/main.js"></script>
</body>
</html>
